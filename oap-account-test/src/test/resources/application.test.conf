profiles = [
  http
  ws-security
  remoting
  jwt-support
]

boot.main = oap-account-test

services {
  oap {
    oap-http-server.parameters {
      defaultPort.httpPort = ${TEST_HTTP_PORT}
      additionalHttpPorts.httpprivate = ${TEST_HTTP_PORT}
    }
  }

  oap-mail {
    oap-mail-password-authenticator.parameters {
      username = ""
      password = ""
    }
  }

  oap-storage-mongo {
    mongo-client.parameters {
      connectionString = "mongodb://"${MONGO_HOST}":"${MONGO_PORT}"/account"
      crashDumpPath = ${TEST_DIRECTORY}/account
    }
  }

  oap-ws {
    session-manager.parameters.cookieDomain = localhost
  }

  oap-ws-sso {
    oap-ws-sso-user-provider.remote.url = "http://localhost:"${TEST_HTTP_PORT}"/remote/"
  }

  oap-account {
    organization-persistence.parameters.crashDumpPath = ${TEST_DIRECTORY}/organization
    user-persistence.parameters.crashDumpPath = ${TEST_DIRECTORY}/user

    organization-ws.parameters.confirmUrlFinish = "http://xenoss.io"
  }

  oap-account-social {
    facebook-provider {
      implementation = oap.ws.account.testing.FacebookMockClient
    }
    oauth-service {
      parameters {
        providers = {
          FACEBOOK = modules.this.facebook-provider
        }
      }
    }
  }
}
